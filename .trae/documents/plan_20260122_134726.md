# 配件基本资料数据库表和API接口设计

## 1. 数据库表设计

根据前端 `addInfor.vue` 中的字段，创建 `part_info` 表，包含以下字段：

| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | SERIAL | PRIMARY KEY | 主键，自增 |
| xm | VARCHAR(50) | NOT NULL | 序码 |
| bm | VARCHAR(50) | NOT NULL | 编码 |
| mc | VARCHAR(100) | NOT NULL | 名称 |
| jc | VARCHAR(50) | NOT NULL | 简拼 |
| cx | VARCHAR(100)[] | NOT NULL | 车型（数组类型，支持多选） |
| dw | VARCHAR(20) | NOT NULL | 单位 |
| pp | VARCHAR(50) | NOT NULL | 品牌 |
| gg | VARCHAR(100)[] | NOT NULL | 规格（数组类型，支持多选） |
| kw | VARCHAR(50) | NOT NULL | 库位 |
| ysjj | DECIMAL(10,2) | NOT NULL | 预设进价 |
| bz | TEXT | | 备注 |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 更新时间 |

## 2. 后端API接口设计

### 2.1 接口列表

| 方法 | 路径 | 描述 |
|------|------|------|
| POST | /api/part-info | 创建配件基本资料 |
| GET | /api/part-info | 获取所有配件基本资料 |
| GET | /api/part-info/:id | 获取单个配件基本资料 |
| PUT | /api/part-info/:id | 更新配件基本资料 |
| DELETE | /api/part-info/:id | 删除配件基本资料 |
| GET | /api/part-info/search | 搜索配件基本资料 |

### 2.2 接口实现

1. **更新 `partsService.js`**：添加配件基本资料相关的服务函数
2. **更新 `app.js`**：添加配件基本资料相关的API路由

## 3. 前端集成

修改前端 `addInfor.vue` 中的 `handleValidateClick` 函数，调用新的后端API接口提交表单数据。

## 4. 实现步骤

1. 创建 `part_info` 数据库表
2. 更新 `partsService.js`，添加配件基本资料服务函数
3. 更新 `app.js`，添加配件基本资料API路由
4. 修改前端 `addInfor.vue`，集成后端API接口

## 5. 注意事项

1. 车型和规格字段使用PostgreSQL的数组类型，支持多选
2. 预设进价使用DECIMAL类型，确保精度
3. 添加创建时间和更新时间字段，便于数据管理
4. 实现搜索功能，支持按名称、编码、简拼等字段搜索
5. 前端提交数据时，需要将多选字段转换为数组格式