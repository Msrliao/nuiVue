# 员工资料页面完善计划

## 分析现状

### 1. 现有数据库表结构
目前 employee_info 表包含字段：
- id, gh, xm, xb, csrq, lxdh, yx, zw, bm, rzrq, zt, created_at, updated_at

### 2. 表单中新增字段
addInfor.vue 中新增的字段：
- mz (民族)
- idcard (身份证号)
- gzjb (工资级别)
- syq (试用期)
- htsjzrq (合同起始日期)
- htsjzzrq (合同终止日期)
- emergencyContact (紧急联系人)
- emergencyContactPhone (紧急联系人电话)
- bz (备注)

### 3. 需要更新的文件

## 实施计划

### 1. 更新数据库表结构
- 修改 `d:\pgsql\server\create-employee-table.sql` 文件，添加新字段
- 执行 SQL 语句更新数据库表结构

### 2. 更新后端服务
- 修改 `d:\pgsql\server\pgsqlDemo\employeeService.js` 文件：
  - 更新 createEmployee 函数，包含新字段
  - 更新 updateEmployee 函数，包含新字段
  - 更新 searchEmployees 函数，支持新字段搜索

### 3. 更新前端组件
- 修改 `d:\pgsql\myvue\src\views\base\base_emp\table.vue` 文件：
  - 更新 RowData 接口，添加新字段
  - 更新 createColumns 函数，添加新列
- 修改 `d:\pgsql\myvue\src\views\base\base_emp\addInfor.vue` 文件：
  - 修复职位和部门的下拉框绑定错误
  - 确保所有字段正确绑定

### 4. 测试验证
- 重启后端服务，确保 API 接口正常
- 测试新增员工功能，验证所有字段都能正确保存
- 测试编辑员工功能，验证所有字段都能正确显示和更新
- 测试删除员工功能，验证操作正常
- 测试搜索功能，验证能根据新字段搜索

## 技术要点

1. **数据库设计**：确保新字段的数据类型和约束合理
2. **后端实现**：保持与现有代码风格一致，确保 API 接口兼容
3. **前端更新**：确保表格显示和表单绑定正确
4. **数据验证**：确保必填字段的验证逻辑完整

## 预期结果

- 数据库表结构完整，包含所有表单字段
- 后端 API 接口支持所有字段的增删改查
- 前端表格显示所有字段数据
- 表单能正确提交和保存所有字段数据
- 搜索功能支持所有字段的查询