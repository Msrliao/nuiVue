# 实现客户资料管理功能

## 一、数据库设计

### 1. 创建客户资料表

根据前端表单字段，创建 `customer_info` 表，包含以下字段：

* `id` (SERIAL PRIMARY KEY)：自增主键

* `khjc` (VARCHAR)：客户简称

* `khjp` (VARCHAR)：客户简拼

* `khqc` (VARCHAR)：客户全称

* `lxr` (VARCHAR)：联系人

* `lxdh` (VARCHAR)：联系电话

* `zxdh` (VARCHAR)：座机电话

* `qtlxfs` (VARCHAR)：其他联系方式

* `lxdz` (VARCHAR)：联系地址

* `yhzhm` (VARCHAR)：银行账户名

* `yhzh` (VARCHAR)：银行账号

* `ssyh` (VARCHAR)：所属银行

* `khlx` (VARCHAR\[])：客户类型（数组类型）

* `jyfw` (VARCHAR\[])：经营范围（数组类型）

* `ssqd` (VARCHAR\[])：所属地区（数组类型）

* `fkfs` (VARCHAR\[])：付款方式（数组类型）

* `mrwl` (VARCHAR\[])：默认物流（数组类型）

* `mryhfs` (VARCHAR\[])：默认运货方式（数组类型）

* `bz` (TEXT)：备注

* `created_at` (TIMESTAMP)：创建时间

* `updated_at` (TIMESTAMP)：更新时间

## 二、后端开发

### 1. 创建客户资料服务模块

创建 `pgsqlDemo/customerService.js` 文件，实现以下功能：

* `createCustomer`：创建客户资料

* `getAllCustomers`：获取所有客户资料

* `getCustomerById`：根据ID获取客户详情

* `updateCustomer`：更新客户资料

* `deleteCustomer`：删除客户资料

* `searchCustomers`：搜索客户资料

### 2. 添加API路由

在 `app.js` 中添加客户资料相关的API路由：

* POST /api/customers：创建客户资料

* GET /api/customers：获取客户资料列表

* GET /api/customers/:id：获取客户详情

* PUT /api/customers/:id：更新客户资料

* DELETE /api/customers/:id：删除客户资料

* GET /api/customers/search：搜索客户资料

## 三、前端开发

### 1. 改进 `addInfor.vue` 页面

* 修复表单字段绑定问题（如所属银行字段绑定错误）

* 实现 `handleValidateClick` 函数，添加表单验证和提交逻辑

* 调用后端API提交客户资料

* 添加操作成功/失败的提示信息

* 完善表单重置和取消功能

### 2. 添加客户类型、经营范围等下拉选项数据

* 可以从后端API获取，或在前端定义静态数据

## 四、测试

1. 测试数据库连接和表创建
2. 测试后端API接口
3. 测试前端表单提交功能
4. 测试完整的增删改查流程

## 五、技术要点

* 使用PostgreSQL的数组类型存储多选项数据

* 遵循现有代码结构和风格

* 确保前后端数据格式一致

* 添加适当的错误处理和提示信息

* 实现完整的CRUD操作

